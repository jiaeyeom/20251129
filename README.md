# Black-Scholes Option Pricer (Monte Carlo)

Flask 기반의 웹 계산기로, Black-Scholes 가정하에서 몬테카를로 시뮬레이션을 통해 옵션 가치를 추정합니다. 만기 시점의 자산 가격을 `S` 변수로 사용하는 임의의 페이오프 식을 입력해 다양한 구조의 옵션을 계산할 수 있습니다.

## 사전 준비

1. (선택) 가상환경을 생성합니다.
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   ```
2. 의존성을 설치합니다.
   ```bash
   pip install -r requirements.txt
   ```

## 실행 방법

1. 서버를 실행합니다.
   ```bash
   python app.py
   ```
   기본 포트는 `8000`이며, 환경변수 `PORT`로 변경할 수 있습니다.

2. 브라우저에서 `http://localhost:8000`을 열어 UI를 사용합니다.

## 사용법

- 입력 파라미터
  - `S0`: 현재 기초자산 가격
  - `r`: 무위험 이자율 (연율)
  - `sigma`: 변동성 (연율)
  - `T`: 만기 (년 단위)
  - `Payoff expression`: 만기 자산가격을 `S`로 두고 작성하는 식

- 지원하는 연산/함수 예시
  - 기본 연산: `+`, `-`, `*`, `/`, 거듭제곱 `**`
  - NumPy 헬퍼: `maximum`, `minimum`, `exp`, `log`, `sqrt`
  - `np`/`numpy` 네임스페이스도 노출되어 있으므로 `np.maximum(S-100, 0)` 같은 표현도 가능합니다.

- 예시 페이오프
  - 유럽 콜: `maximum(S - 100, 0)`
  - 유럽 풋: `maximum(100 - S, 0)`
  - 불 스프레드: `maximum(S - 100, 0) - maximum(S - 110, 0)`

## 동작 방식

- 위험중립 기하브라운 운동 하에서 종가 `S_T`를 몬테카를로로 생성하고, 사용자가 입력한 페이오프 식에 대입해 기대값을 계산한 뒤 `exp(-rT)`로 할인합니다.
- 시뮬레이션 표본수는 20,000경로이며, 출력에는 추정값과 표준오차를 제공합니다.

## 주의사항

- 페이오프 식은 제한된 환경에서 `eval`로 실행되므로, 제공된 함수와 `S` 변수만 사용해주세요.
- 입력 오류나 유효하지 않은 표현식은 화면에 오류 메시지로 표시됩니다.
